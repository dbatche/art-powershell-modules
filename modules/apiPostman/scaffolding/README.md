# Postman API Test Scaffolding Tools

This folder contains tools and documentation for scaffolding Postman test structures for REST API endpoints, with a focus on PUT endpoints in the Finance API.

## üìÅ Folder Structure

```
scaffolding/
‚îú‚îÄ‚îÄ scripts/          # PowerShell automation scripts
‚îú‚îÄ‚îÄ docs/             # Analysis, guides, and documentation
‚îú‚îÄ‚îÄ examples/         # Example outputs and templates
‚îî‚îÄ‚îÄ README.md         # This file
```

## üõ†Ô∏è Scripts

### Core Scaffolding Scripts

#### `New-PutEndpointScaffold.ps1`
Generates a complete Postman test structure for PUT endpoints including:
- Folder hierarchy (200, 400, 404 status codes)
- Template test requests
- Pre-request and test scripts
- Field validation logic

**Usage:**
```powershell
.\scripts\New-PutEndpointScaffold.ps1 `
    -ApiKey "PMAK-..." `
    -CollectionUid "8229908-779780a9-..." `
    -EndpointName "apInvoices" `
    -ResourceIdName "apInvoiceId" `
    -SuccessTests @("minimal fields", "vendor update") `
    -ErrorTests @("invalid vendorId") `
    -DryRun
```

**See:** `docs/PUT-Endpoint-Quick-Start.md` for detailed examples

---

### Supporting Scripts

#### `Get-PostmanCollectionStructure.ps1`
Fetches collection structure directly from Postman API and generates:
- Resource summaries with UIDs
- Ready-to-use Postman CLI commands
- Collection structure in multiple formats

**Usage:**
```powershell
.\scripts\Get-PostmanCollectionStructure.ps1 `
    -ApiKey "PMAK-..." `
    -CollectionUid "8229908-779780a9-..." `
    -Format CLI `
    -EnvironmentUid "11896768-xxx-..."
```

**Output Formats:**
- `Summary` - Table view with folders, UIDs, and test counts
- `CLI` - Ready-to-use Postman CLI commands
- `JSON` - Raw collection structure

---

#### `Update-PostmanRequestName.ps1`
Bulk update Postman request names programmatically. Workaround for Postman API limitations that prevent simple name updates.

**Usage:**
```powershell
# Single update
.\scripts\Update-PostmanRequestName.ps1 `
    -ApiKey "PMAK-..." `
    -CollectionUid "8229908-779780a9-..." `
    -RequestUid "8229908-xxx-..." `
    -NewName "invalid ISTA code TM-185730"

# Bulk update
$updates = @(
    @{ Uid = "8229908-xxx-..."; NewName = "invalid GL Account TM-185730" },
    @{ Uid = "8229908-yyy-..."; NewName = "invalid Driver Code TM-185730" }
)
.\scripts\Update-PostmanRequestName.ps1 `
    -ApiKey "PMAK-..." `
    -CollectionUid "8229908-779780a9-..." `
    -BulkUpdates $updates
```

**See:** `docs/Update-Request-Names-Examples.md` for more examples

---

## üìö Documentation

### Analysis Documents

- **`PUT-Endpoint-Template-Analysis.md`** - Detailed analysis of existing PUT endpoints, common patterns, and test types
- **`PUT-Folder-Level-Scripts-Analysis.md`** - Deep dive into collection and folder-level test scripts, validation architecture

### Guides

- **`PUT-Endpoint-Quick-Start.md`** - Quick-start guide with practical examples
- **`PUT-Endpoint-Scaffold-Summary.md`** - Overall project summary, features, and architecture

### Updates & Notes

- **`PUT-Scaffold-Update-Summary.md`** - Recent updates, known limitations, and workarounds
- **`Update-Request-Names-Examples.md`** - Examples for bulk request renaming

---

## üìã Examples

The `examples/` folder contains sample outputs generated by the scaffolding scripts. These demonstrate the expected structure and can be used as templates.

---

## üéØ Use Cases

### 1. Scaffold a New PUT Endpoint
When implementing a new PUT endpoint (e.g., PUT /apInvoices/:apInvoiceId):
1. Define success and error test scenarios
2. Run `New-PutEndpointScaffold.ps1` with dry-run to preview
3. Generate scaffold JSON
4. Import into Postman
5. Manually add the 200 folder test script
6. Customize tests for business logic

### 2. Generate CLI Commands for Testing
When you need to run specific resource tests via Postman CLI:
1. Run `Get-PostmanCollectionStructure.ps1` with `-Format CLI`
2. Find the folder UID for your resource
3. Copy the generated command and execute

### 3. Bulk Update Test Names
When test naming conventions change or Jira tickets are added:
1. Prepare array of updates with UIDs and new names
2. Run `Update-PostmanRequestName.ps1` with `-BulkUpdates`
3. Verify changes in Postman

---

## üîÆ Future Enhancements

- **POST Endpoint Scaffolding** - Adapt PUT scaffolding for POST endpoints
- **DELETE Endpoint Scaffolding** - Support for DELETE endpoint tests
- **Data-Driven Test Generation** - YAML-based test definitions
- **Three-Stage Test Architecture** - Separate execution, validation, and reporting

---

## üìù Notes

- Scripts require PowerShell 5.1 or higher
- Valid Postman API key required (PMAK-...)
- Collection UIDs must include owner prefix (e.g., 8229908-xxx)
- Some features have known limitations (see individual docs)

---

## üìû Support

For questions or issues, refer to:
1. Quick-start guide: `docs/PUT-Endpoint-Quick-Start.md`
2. Project summary: `docs/PUT-Endpoint-Scaffold-Summary.md`
3. Chat history and session notes

---

**Last Updated:** October 9, 2025
**Project Status:** Active Development

